#### 一，重要目录

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/f7c06b36d25443c7bbed6f78bd61b3f7.png)

# 二，常用路径

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/7af0ad7d118544b79ee8f14289fc652b.png)

# 三，常用命令

> 立志列举出Linux中常用的所有命令(`有很多命令不使用的话，很快会忘记哦`)。

## （`cd` 目录前进/ 后缀）

- `cd /`表示跳转到根目录下，无论是哪个目录下，执行此命令后一定会跳转到根目录下。

  ```
  [root@localhost /]# cd /opt/
  [root@localhost opt]# pwd
  /opt
  [root@localhost opt]# cd /
  [root@localhost /]# 
  [root@localhost /]# pwd
  /
  [root@localhost /]# 
  ```
- `cd ~` 表示跳转到主目录下。

  ```
  [root@localhost /]# pwd
  /
  [root@localhost /]# cd ~
  [root@localhost ~]# pwd
  /root
  [root@localhost ~]# 
  ```
- `cd .` 表示跳转还是当前目录

  ```
  [root@localhost ~]# pwd
  /root
  [root@localhost ~]# cd .
  [root@localhost ~]# pwd
  /root
  [root@localhost ~]# 
  ```
- `cd ..` 表示跳转到上一级目录

  ```
  [root@localhost package]# pwd
  /opt/package
  [root@localhost package]# cd ..
  [root@localhost opt]# pwd
  /opt
  [root@localhost opt]# 
  ```
- `cd /xx/xx` 表示绝对目录跳转。如果前面添加了 `/` 表示从根目录下开始计算

  ```
  [root@localhost opt]# pwd
  /opt
  [root@localhost opt]# cd /etc/profile.d/
  [root@localhost profile.d]# pwd
  /etc/profile.d
  [root@localhost profile.d]# 
  ```
- `cd xxx/xx` 表示当前目录跳转。从所在目录开始计算

  ```
  [root@localhost opt]# pwd
  /opt
  [root@localhost opt]# ls
  111.tar.gz  11.txt  containerd  install  package
  [root@localhost opt]# cd package/
  [root@localhost package]# pwd
  /opt/package
  [root@localhost package]# 
  ```

## 2. `ls` 查询列表

> 多个命令可以一起使用，而且没有先后顺序。例如：`ls -lha` === `ls -hal`

- `ls` 通过命令直接查询列表

  ```
  [root@localhost opt]# ls
  111.tar.gz  11.txt  containerd  install  package
  [root@localhost opt]# 
  ```
- `ls -l` 查询长格式的列表。 等同于 `ll`

  ```
  [root@localhost opt]# ls -l
  total 12
  -rw-r--r--. 1 root root 10240 Oct 18 15:30 111.tar.gz
  -rw-r--r--. 1 root root     0 Oct 18 15:29 11.txt
  drwx--x--x. 4 root root    28 Sep  9 01:15 containerd
  drwxr-xr-x. 4 root root    32 Sep 15 02:17 install
  drwxr-xr-x. 4 root root    52 Oct 18 02:23 package
  [root@localhost opt]# 
  ```
- `ls -lh` 文件大小以恰当形式展示。比如：KB, M等

  ```
  [root@localhost opt]# ls -lh
  total 12K
  -rw-r--r--. 1 root root 10K Oct 18 15:30 111.tar.gz
  -rw-r--r--. 1 root root   0 Oct 18 15:29 11.txt
  drwx--x--x. 4 root root  28 Sep  9 01:15 containerd
  drwxr-xr-x. 4 root root  32 Sep 15 02:17 install
  drwxr-xr-x. 4 root root  52 Oct 18 02:23 package
  [root@localhost opt]# 
  ```
- `ls -al` 可以展示隐藏文件

  ```
  [root@localhost opt]# ls -la
  total 12
  drwxrwxrwx.  5 root root    86 Oct 18 15:30 .
  dr-xr-xr-x. 18 root root   255 Apr  6  2023 ..
  -rw-r--r--.  1 root root 10240 Oct 18 15:30 111.tar.gz
  -rw-r--r--.  1 root root     0 Oct 18 15:29 11.txt
  drwx--x--x.  4 root root    28 Sep  9 01:15 containerd
  drwxr-xr-x.  4 root root    32 Sep 15 02:17 install
  drwxr-xr-x.  4 root root    52 Oct 18 02:23 package
  [root@localhost opt]# 
  ```

## 3. `pwd` 当前目录

> 表示当前光标所在的目录

```
[root@localhost opt]# pwd
/opt
[root@localhost opt]# 
```

## 4. `mkdir` 创建目录

> ！！！记住只有创建文件夹递归的时候 需要用到参数 `-p` 其余的递归都是 `-r`的。

- `mkdir aaa bbb ccc` 可以通过创建多个文件夹

  ```
  [root@localhost tmp]# ls
  [root@localhost tmp]# mkdir aa bb cc
  [root@localhost tmp]# ls 
  aa  bb  cc
  [root@localhost tmp]# 
  ```
- `mkdir -p a/b/c` 可以递归的创建文件夹

  ```
  [root@localhost tmp]# ls
  [root@localhost tmp]# mkdir -p a/b/c
  [root@localhost tmp]# tree
  .
  └── a
      └── b
          └── c

  3 directories, 0 files
  [root@localhost tmp]# 
  ```

## 5. `rmdir` 删除目录

> 可以直接删除空文件夹

```
[root@localhost tmp]# ls
[root@localhost tmp]# mkdir a
[root@localhost tmp]# ls
a
[root@localhost tmp]# rmdir a
[root@localhost tmp]# ls
[root@localhost tmp]# 
```

## 6. `rm` 删除

- `rm xxx ` 可以直接删除文件，但是不可以删除目录

  ```
  [root@localhost tmp]# 
  [root@localhost tmp]# ls
  [root@localhost tmp]# mkdir aa
  [root@localhost tmp]# touch bb.txt
  [root@localhost tmp]# ls
  aa  bb.txt
  [root@localhost tmp]# rm bb.txt 
  rm: remove regular empty file ‘bb.txt’? y
  [root@localhost tmp]# rm aa
  rm: cannot remove ‘aa’: Is a directory
  [root@localhost tmp]# ls
  aa
  [root@localhost tmp]# 
  ```
- `rm -r xxx` 可以删除文件夹 以及文件

  ```
  [root@localhost tmp]# ls
  a  b.txt
  [root@localhost tmp]# rm -r *
  rm: remove directory ‘a’? y
  rm: remove regular empty file ‘b.txt’? y
  [root@localhost tmp]# ls
  [root@localhost tmp]# 
  ```
- `rm -rf xxx` 以强制(`无需询问`)的形式删除文件以及文件夹

  ```
  [root@localhost tmp]# ls
  aa  bb.txt
  [root@localhost tmp]# rm -rf *
  [root@localhost tmp]# ls
  [root@localhost tmp]# 
  ```

## 7. `cp` 复制

- `cp 文件 yy/yy` 复制文件到指定目录下

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/0097101ebf5749a8ac42ee302ab66ff6.png)
- `cp -r xx yy` 递归复制目录 到指定目录下

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/fadc3f1e5f6e4b7e8662c0a8db51c791.png)

## 8. `mv` 移动/命名

- `mv aa bb`  如果修改的名称不存在，就是修改名称。此时 `bb` 就不存在

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/047c51e62e2c4c1ba6c1f09b583de3c1.png)
- `mv xx yy` 如果修改的名称存在，就是移动文件。此时 `yy` 就存在

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/98404ec160b24236bd6a427fe9e4292e.png)

## 9. `touch` 创建文件

- `touch xx yy zz` 创建多个文件

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/8858621302ce4dd8846ba4b1b696ad07.png)

## 10. `echo` 输出

- `echo xx > yy` 以 `覆盖`的形式将内容添加到文件中

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/108dff59c1974e06a464949bbcc93424.png)
- `echo xx >> yy` 以 `追加`的形式将内容添加到文件中

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/57cb2023a8b649a89204f20ca34a5281.png)

## 11. `cat` 打印

- `cat name.md` 直接在控制台打印log

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/798f4c02984a4af6b83438a382a6bec2.png)
- `cat -n name.md` 以显示行号的形式在控制台输出log

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/7a47125dd2b645edabe8e0dbfe1c8ace.png)
- `cat > a.txt <<EOF` 以重定向的方式进行输入

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/5b169cc06be64ac8bda9d6dbc17b9b27.png)

## 12. `more` 打印

- `more name.md` 一页一页的翻动显示
- `more -[NUM] name.md` 以指定行数的方式 一部分一部分显示，以 `空格键`向下翻页

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/eab0cbb76d4440ab8c9c5eb2c14043f3.png)

## 13. `tail` 打印

- `tail -f xx` 着文件的增长，输出附加数据. 动态看log
- `tail -n [NUM] xx` 查看指定行数的内容

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/5b407e5b17254526afa402af3a56da5b.png)

## 14. Vim 相关

### 14.1 编辑模式

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/a14a372c08b248139a9d2a4255a90263.png)

- `i` 命令模式下 输入 `i` 在当前光标的位置进行插入
- `I` 命令模式下 输入 `I` 在当前光标的行首位置进行插入
- `a` 命令模式下 输入 `a` 在当前光标的下一个位置进行插入
- `A` 命令模式下 输入 `A` 在当前光标的行尾位置进行插入
- `o` 命令模式下 输入 `o` 当前光标位置的下一行添加一行
- `O` 命令模式下输入 `O` 当前光标位置的上一行添加一行

### 14.2 模式的区分

- `命令模式`

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/51e918ed14f64c59a2370b93a489d01a.png)

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/8027b20f5ea441b9b29f2c6fd2af2911.png)

> 使用 `vi命令` 进入文本后，直接就是命令模式

- `编辑模式`

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/6d1c916e8a8a4230a318bbd201c00afc.png)

> 使用 `i`/ `I`/ `o`/ `O`/ `a`/ `A` 等命令后 都可以进入编辑模式

- `底部命令模式`

  ![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/00f8772275ef45a8be0cd811a88508ee.png)

> 此时 按键 `ESC`后，再次按 `shift` + `:`， 就可以进去底部命令模式

### 14.3 命令模式下快捷键

- `yy` 复制当前行
- `p` 在光标所在行的下一行，进行粘贴
- `dd` 删除所在行
- `nyy` 复制所在行往下的 n 行数据
- `ndd` 删除所在行往下的 n 行数据
- `gg` 快速跳转到文件首行的首字符
- `G` 快速跳转到文件尾行的尾字符
- `u` 进行动作撤销
- `$` 快速跳转到所在行的尾字符
- `/keyword` 表示搜索关键字
- `s/old/new` 表示替换所在行的第一个关键字
- `s/old/new/g` 表示替换所在行的所有的关键字
- `%s/old/new/g` 表示替换所在文件的所有的关键字

## 15. chown 修改属主/ 属组

- 修改属主

```bash
chown 用户名 文件
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/42b0a0a3fa1241d59122c7b74975dbef.png)

- 修改属组

```bash
chown vagrant:vagrant test
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/2054237738d044558042ff5183f74784.png)

- 递归修改属主 以及属组

```bash
chown -R vagrant:vagrant aa
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/9b421e05d83d45b5babef6592a9e8f39.png)

## 16. chmod 修改权限

- 一般修改权限的方式

```bash
chmod 777 name.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/0d9fadc28eb54b26a607945b64c7c279.png)

- 通过特殊符号修改权限

```bash
chmod +wx name.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/8bc788ccc6634bc79db36ae521ed4718.png)

- 通过特殊的符号 来删除权限

```bash
chmod a-x name.md
```

> `a` 表示所有的。 `-x` 表示删除执行权限

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/effd27b256c346e99533afe5655efb50.png)

## 17. chgrp 修改群组

```bash
chgrp vagrant name.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/b90364116648417385a76800b0ed9fc3.png)

## 18. id 查询用户 或是 群组

- 查询当前用户

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/53a4ec3c3ba24d409c42616e5f676e53.png)

- 查询指定用户

```bash
id [vagrant]
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/40c800b628314487a73ae2e7fe8d52cb.png)

## 19. su 切换用户

> 可以进行用户切换

```bash
su [root]
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/c69374447dfb4983acbf5c12b6198829.png)

## 20. sudo 普通用户提高权限

```bash
sudo yum install network-tools -y
```

## 21. whoami 显示当前用户

```bash
whoami
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/b26ec34a4c344cf2a71e167399467ebf.png)

## 21. passwd

> 修改密码

- 修改自己的密码

```bash
passwd
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/2f4c59fe3caf4836b1690cd854a4b543.png)

- 修改指定用户密码

```bash
passwd vagrant
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/d390472d5ee04413b52ee474be9e5acc.png)

## 22. useradd 添加用户

### 22.1. 普通方式添加用户

```bash
useradd lihh1
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/ecf1363b8d394f739e11c3cd3754e095.png)

### 22.2. 以指定目录的方式创建用户【`-d`】

```bash
useradd lihh1 -d /home/lihh1
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/4025f4cbae04462c8b73517674779bab.png)

### 22.3. 创建用户，指定bash【`-s`】

```bash
useradd lihh2 -d /home/lihh2 -m -s /bin/sh
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/08f50a74110c48bfa25219025ed9195c.png)

### 22.4. 创建用户 指定群组【`-g`】

```bash
useradd lihh3 -g lihh2
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/4aae5fb8b19e47d696eca3a89b035d45.png)

## 23. userdel 删除用户

```bash
userdel -r [用户]
```

- `-r` 参数 表示删除用户的同时 会删除创建的目录

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/bf48cfc3bdf54d3f9728817d5395b0c7.png)

## 24. w 查看登入系统的用户信息

```bash
w
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/2d82859995484c97923b15398408ee43.png)

## 25. last 显示用户最近登录信息

```bash
last
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/b88573c12fc2441ca17a386b4152fdd1.png)

## 26. lastlog 显示登录日志，包括没有登录的

```bash
lastlog
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/9b61710e6aaf4cc5b1b8d5a4d74be142.png)

## 26. usermod 修改用户

### 26.1 修改用户的uid

```bash
usermod -u 1201 lihh
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/f6503a5f47994a66a135b71ca86d5c2e.png)

### 26.2 设置主要组

```bash
usermod -G root lihh
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/b482f492254a4366bcbbfcc22c1481d8.png)

### 26.3 其他参数

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/118b8a3cc084407fb92d81591841ccd8.png)

## 27. !!等 命令行等快捷方式

### 27.1 `!!` 执行上一条命令

```bash
!!
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/54117930b9ab4b20b9a9b5c5f38f4bb0.png)

### 27.2 `![NUMB]` 执行命令行中第几行

```bash
!1016
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/710ff0c1bfc34bdab1d441f9ccb09401.png)

### 27.3 `ctrl + R` 在历史记录中搜索命令

```bash
ctrl + R
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/0da5d500f14e4190b851cdb4ee380b6a.png)

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/0825791aed8f49faa5ff748c09871d2d.png)

## 28. 命令行移动的快捷键

- Ctrl + A 			光标迅速回到行首
- Ctrl + E			光标迅速回到行尾
- Ctrl + k			删除光标到行尾内容
- Ctrl + u			删除光标到行首内容
- Ctrl + y			粘贴删除的内容
- Ctrl + c			临时终止命令行命令
- Esc + b				移动到当前单词的开头
- Esc + f				移动到当前单词的结尾

## 29. grep 从数据源中检索

### 29.1 `-i` 忽略大小写

```bash
cat readme.md | grep -i lihh
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/99cd79314e5e412585f7f3c662020f66.png)

### 29.2 `-v` 筛选不包含某项的，反向选择

```bash
cat readme.md | grep -vi lihh
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/c803e9008ae941f294a3d2bccc4628a1.png)

### 29.3. `-c` 匹配某个关键字出现的次数

```bash
grep -ci lihh readme.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/38e2b511011e4af3a3185f963b92aba5.png)

### 29.4 `-w` 按单词进行筛选

> 跟单纯的grep不同，这个命令是按整体的单词而言的。

```bash
ifconfig eth0 | grep -w inet
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/188a805111d24ab1b261aa800f269ea7.png)

### 29.5 `-r` 进行递归查询

```bash
grep -rin "text" ./
# -r 表示递归检索
# -i 表示忽略大小写
# -n 表示显示行号
```

```bash
[root@localhost data]# grep -rin "text" ./
./day05/readme.md:1:text
[root@localhost data]#
```

### 29.# 其余的命令

```bash
grep options 'keys' filename
OPTIONS:
    -i: 不区分大小写
    -v: 查找不包含指定内容的行,反向选择
    -w: 按单词搜索
    -o: 打印匹配关键字
    -c: 统计匹配到的次数
    -n: 显示行号
    -r: 逐层遍历目录查找
    -A: 显示匹配行及后面多少行
    -B: 显示匹配行及前面多少行
    -C: 显示匹配行前后多少行
    -l：只列出匹配的文件名
    -L：列出不匹配的文件名
    -e: 使用正则匹配
    -E:使用扩展正则匹配
    ^key:以关键字开头
    key$:以关键字结尾
    ^$:匹配空行
    --color=auto ：可以将找到的关键词部分加上颜色的显示
```

## 30. `sort` 排序命令

> 基础数据

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/fae699471a604caba8ba2eab479743f6.png)

### 30.1 `-u` 去除重复行

```bash
sort -u readme.md

```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/7aa5705737ac4939884ac3429bff3dc1.png)

### 30.2 `-rn` 以数字降序排列，默认是字符

> 添加参数 `-n` 表示要求以数字排序

```bash
sort -rn readme.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/187c3c2a4b5643ec8fadfec1bf9a6126.png)

### 30.3 `-o` 重定向到文件中

```bash
sort -urn readme.md -o new.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/af2b9054fad946cb8ad7fbee06fe7fe4.png)

### 30.4 其他的命令

```bash
语法：
sort [options] file
将文件的每一行作为一个单位，从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。

options:
-u ：去除重复行
-r ：降序排列，默认是升序
-o : 将排序结果输出到文件中  类似 重定向符号>
-n ：以数字排序，默认是按字符排序
-t ：分隔符
-k ：第N列
-b ：忽略前导空格。
-R ：随机排序，每次运行的结果均不同。
```

## 31. `cut` 字符串截取

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/434ea88d743448f39386ee14380e7928.png)

#### 31.1 `-d` 以指定符号分割

```bash
cut -d: -f1 readme.md
# 每行以冒号分割，同时每行截取第一个列内容
# cut -d: -f1,6,7 1.txt 		以:冒号分割，截取第1,6,7列内容
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/f6213f833d5d4bdab7b82b2c13596525.png)

#### 31.2  `-c` 只选中指定的字符

```bash
cut -c1-2 readme.md
# 每行选中1~2个字符
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/676e3c60840a4c68897dfdfb9187fc80.png)

#### 31.3 其他命令

```bash
  -b, --bytes=列表              只选中指定的这些字节
  -c, --characters=列表         只选中指定的这些字符
  -d, --delimiter=分界符        使用指定分界符代替制表符作为区域分界
  -f, --fields=LIST       select only these fields;  also print any line
                            that contains no delimiter character, unless
                            the -s option is specified
  -n                      with -b: don't split multibyte characters
      --complement              补全选中的字节、字符或域
  -s, --only-delimited          不打印没有包含分界符的行
      --output-delimiter=字符串 使用指定的字符串作为输出分界符，默认采用输入
                                的分界符
      --help            显示此帮助信息并退出
      --version         显示版本信息并退出
```

## 32. `uniq` 连续消息去重

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/eb734be107fe4791adfee839a93cf518.png)

### 32.1 `-c` 统计重复行次数

```bash
uniq -c readme.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/1ed4c9a518b3493ab5ced7e3cb844136.png)

### 32.2 `-d` 只显示重复行

```bash
uniq -d readme.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/00e00bf656af43f0a9acf3496dd39a58.png)

### 32.3 其他命令

```bash
Mandatory arguments to long options are mandatory for short options too.
  -c, --count           统计重复行次数
  -d, --repeated        只显示重复行
  -i, --ignore-case     忽略大小写
  -s, --skip-chars=N    avoid comparing the first N characters
  -u, --unique          only print unique lines
```

## 33. `paste` 合并文件内容

- 参数

```bash
Mandatory arguments to long options are mandatory for short options too.
  -d, --delimiters=列表 改用指定列表里的字符替代制表分隔符
  -s, --serial          不使用平行的行目输出模式，而是每个文件占用一行
      --help            显示此帮助信息并退出
      --version         显示版本信息并退出
```

- 命令

```bash
paste a.md b.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/21665e75f7a947d2b1c92c271f51d521.png)

## 34. `xargs` 结果传递

### 34.1 `-a` 从文件读入作为sdtin

```bash
xargs -a readme.md
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/78e3e6b9b4b64e6280344489a61a911e.png)

### 34.2 `-n` 每行显示的字符

```bash
xargs -a readme.md -n3
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/beeaa80e59084725b92d4a3c7bf029fc.png)

### 34.3 `-I` 将xargs接收的每项名称，逐行赋值给 {}，可以用 {} 代替

```bash
xargs -a readme.md -n1 -I {} echo {}--bak
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/cf745b6b89f840de9f6932cccbab33f5.png)

## 35. `tr` 替换

**格式**

```bash
用法：tr [选项]... SET1 [SET2]
从标准输入中替换、缩减和/或删除字符，并将结果写到标准输出。

  -c, -C, --complement          首先补足SET1
  -d, --delete                  删除匹配SET1 的内容，并不作替换
  -s, --squeeze-repeats 		如果匹配于SET1 的字符在输入序列中存在连续的
                                重复，在替换时会被统一缩为一个字符的长度
  -t, --truncate-set1           先将SET1 的长度截为和SET2 相等
      --help            		显示此帮助信息并退出
      --version         		显示版本信息并退出
  
用法1：把commands命令输出做为tr输入进行处理
commands | tr  'string1'  'string2'

用法2：把文件中的内容输入给tr进行处理
tr  'string1'  'string2' < filename

用法3：把文件中的内容输入给tr进行处理，需要使用到选项
tr options 'string1' < filename
```

### 35.1 替换指定内容

> 统一将空格替换为别的内容

```bash
[root@localhost day04]# cat 222.md 
22 333 222 55 33 55 666
[root@localhost day04]# cat 222.md | tr " " ":"
22:333:222:55:33:55:666
[root@localhost day04]# 
```

### 35.2 将重复的值 替换为一个

**重复替换空格**

```bash
[root@localhost day04]# ifconfig eth0 | grep -w inet
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
[root@localhost day04]# ifconfig eth0 | grep -w inet | tr -s " "
 inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255
[root@localhost day04]# 
```

**替换连续的&**

```bash
[root@localhost day04]# cat 333.md 
123&&&45&&67&&&&89&&&&&
[root@localhost day04]# cat 333.md | tr -s "&"
123&45&67&89&
[root@localhost day04]# 
```

### 35.3 使用正则替换

```bash
[root@localhost day04]# cat 333.md 
123&&&45&&67&&&&89&&&&&
[root@localhost day04]# cat 333.md | tr "[0-9]" "$"
$$$&&&$$&&$$&&&&$$&&&&&
[root@localhost day04]# 
```

### 35.4 小写替换大写

```bash
[root@localhost day04]# cat /etc/passwd | grep -w lihh
lihh:x:1104:0::/home/lihh:/bin/bash
[root@localhost day04]# cat /etc/passwd | grep -w lihh | tr "[a-z]" "[A-Z]"
LIHH:X:1104:0::/HOME/LIHH:/BIN/BASH
[root@localhost day04]# 
```

## 36. `tar` 解压/ 压缩

### 36.1 常用参数命令

```bash
# -c 表示创建一个新包
# -f 表示指定包的名称. 此参数必须是最后一个参数
tar -cf all.tar *.png # 将所有后缀为png的图片，都压缩到all包中
# -r 增加新的文件到包中
tar -rf all.tar 1.png # 将指定图片增加到包中
# -u 更新新的文件到包中
tar -uf all.tar 2.png # 更新指定包中的图片
# -t 列举出包中的所有的文件
tar -tf all.tar
# -x 将包进行解压
tar -xf all.tar
# -z 指定参数-z来调用gzip 将包进行压缩
tar -czf all.tar.gz *.png
# -v 显示过程
tar -xvf all.tar
# -C 解压输出到指定的目录
tar -xvf all.tar -C ./tmp/001
```

### 36.2 `-c` 创建新包

```bash
[root@localhost temp]# tar -cf all.tar *.png
[root@localhost temp]# ll
total 12
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root 10240 Feb 14 19:13 all.tar
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
[root@localhost temp]# 

```

### 36.3 `-f` 指定包的名称，必须放到命令尾部

```bash
[root@localhost temp]# tar -cf all.tar *.png
[root@localhost temp]# ll
total 12
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root 10240 Feb 14 19:13 all.tar
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
[root@localhost temp]# 

```

### 36.4 `-r` 增加一个文件到包中

```bash
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
[root@localhost temp]# touch 3.png
[root@localhost temp]# tar -rf all.tar 3.png
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
3.png
[root@localhost temp]# 

```

### 36.5 `-u` 更新一个文件到包中

```bash
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
3.png
[root@localhost temp]# tar -uf all.tar 3.png
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
3.png
[root@localhost temp]# 

```

### 36.6 `-t` 列举出包中所有文件

```bash
[root@localhost temp]# tar -tf all.tar 
1.png
2.png
3.png
[root@localhost temp]# 

```

### 36.7 `-x` 对包进行解压

```bash
[root@localhost temp]# ll
total 12
-rw-r--r--. 1 root root 10240 Feb 14 19:14 all.tar
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# tar -xf all.tar 
[root@localhost temp]# ll
total 12
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root     0 Feb 14 19:14 3.png
-rw-r--r--. 1 root root 10240 Feb 14 19:14 all.tar
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# 

```

### 36.8 `-z` 指定参数-z来调用gzip 将包进行压缩。 一般用来处理后缀为.tar.gz文件

```bash
[root@localhost temp]# ll
total 12
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root     0 Feb 14 19:14 3.png
-rw-r--r--. 1 root root 10240 Feb 14 19:14 all.tar
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# tar -czf all.tar.gz *.png
[root@localhost temp]# ll
total 16
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root     0 Feb 14 19:14 3.png
-rw-r--r--. 1 root root 10240 Feb 14 19:14 all.tar
-rw-r--r--. 1 root root   129 Feb 14 19:17 all.tar.gz
drwxr-xr-x. 3 root root    17 Feb 14 18:29 tmp
[root@localhost temp]# 
```

### 36.9 `-v` 显示解压过程

```bash
[root@localhost temp]# tar -xvzf all.tar.gz 
1.png
2.png
3.png
[root@localhost temp]# 

```

### 36.10 `-C` 将解压文件放到指定目录下

```bash
[root@localhost temp]# ll tmp/002
total 0
[root@localhost temp]# ll
total 16
-rw-r--r--. 1 root root     0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root     0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root     0 Feb 14 19:14 3.png
-rw-r--r--. 1 root root 10240 Feb 14 19:14 all.tar
-rw-r--r--. 1 root root   129 Feb 14 19:17 all.tar.gz
drwxr-xr-x. 4 root root    28 Feb 14 19:19 tmp
[root@localhost temp]# tar -xf all.tar.gz -C tmp/002
[root@localhost temp]# ll tmp/002
total 0
-rw-r--r--. 1 root root 0 Feb 14 19:12 1.png
-rw-r--r--. 1 root root 0 Feb 14 19:13 2.png
-rw-r--r--. 1 root root 0 Feb 14 19:14 3.png
[root@localhost temp]# 
```

## 38. whereis 命令

> 显示命令以及相关文件的全路径

**参数含义**

```bash
# -b 定位指定的命令的可执行文件
# -s 定位源码文件
# -m man帮助文件(文档)的路径
```

**示例**

```bash
[root@localhost /]# whereis locate
locate: /usr/bin/locate /usr/share/man/man1/locate.1.gz
[root@localhost /]#
```

## 39. locate 命令

### 39.1 部署

```bash
yum install mlocate -y
```

### 39.2 更新

```bash
updatedb
```

### 39.3 有效参数

```bash
# -c 不显示内容只显示行数
# -i 忽略大小写
# -r 支持正则
```

### 39.4 特性

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/853e4c7fcd9048d28943d8166537915b.png)

### 39.5 案例

```bash
locate bin
```

## 40. find 命令

> 1. 通过指定的路径完成文件的查找
> 2. 搜索的速度很慢，适合用于查找非系统文件，就是实时查找
> 3. 设置搜索用户具备读取和执行权限的目录
> 4. 默认是精确查询

### 40.1 -name 按名称

```bash
[root@localhost data]# find ./ -name readme.*
./day04/command/readme.md
./day05/readme.md
```

### 40.2 -type 按文件类型

**按文件夹进行查找**

```bash
[root@localhost data]# find ./ -type d
./
./day01
./day02
./day03
./day04
./day04/command
./day04/command/tmp
./day05
./day05/tmp
[root@localhost data]#
```

**按文件查询**

```bash
[root@localhost data]# find ./ -type f
./day01/for-assign.sh
./day01/for-assign-symbol.sh
./day01/number-roll.sh
./day01/number-roll-new.sh
./day01/1.js
./day01/bad_file
./day02/while-add-number.sh
./day02/while-read-line.sh
./day02/simple_select.sh
./day02/while-read-line-1.sh
./day02/fun001.sh
./day02/fun002.sh
./day02/fun003.sh
./day02/fun004.sh
./day03/func001.sh
./day03/func002.sh
./day03/func003.sh
./day03/func004.sh
./day03/func-called-func.sh
./day04/sig-001.sh
./day04/sig-002.sh
./day04/command/1.png
./day04/command/2.png
./day04/command/3.png
./day04/command/4.png
./day04/command/tmp/1.png
./day04/command/tmp/2.png
./day04/command/tmp/3.png
./day04/command/tmp/4.png
./day04/command/all.tar.gz
./day04/command/readme.md
./day04/read-test.sh
./day04/params-count.sh
./day04/ip-test.sh
./day05/readme.md
[root@localhost data]#
```

### 40.3 -perm 按权限查找

```bash
[root@localhost data]# find ./ -perm 777
./day04/command/readme.md
./day05/readme.md
[root@localhost data]#
```

#### 40.3.1 用户至少有写权限

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/26135c9b9c604cb998d02e084fe53349.png)

#### 40.3.2 用户 以及群组至少有写权限

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/671e52f819124302af6096d5479f7ead.png)

### 40.4 -maxdepth 指定深度

```bash
[root@localhost data]# find ./ -maxdepth 3 -perm 777
./day04/command/readme.md
./day05/readme.md
[root@localhost data]#
```

### 40.5 -size 按大小

**查询大小 > 20k 的文件**

```bash
[root@localhost day05]# find ./ -size +20k
./readme.md
```

**查询大小<20k 的文件**

```bash
[root@localhost day05]# find ./ -size -20k
./
./tmp
./tmp/detph-tmp
./tmp/detph-tmp/test-shell.sh
./tmp/detph-tmp/tmp001
./tmp/detph-tmp/tmp001/test-shell001.sh
[root@localhost day05]#

```

### 40.6 -empty 空文件 以及目录

```bash
[root@localhost data]# find ./ -empty
./day01/1.js
./day01/bad_file
./day04/command/1.png
./day04/command/2.png
./day04/command/3.png
./day04/command/4.png
./day04/command/tmp/1.png
./day04/command/tmp/2.png
./day04/command/tmp/3.png
./day04/command/tmp/4.png
./day05/tmp/detph-tmp/test-shell.sh
./day05/tmp/detph-tmp/tmp001/test-shell001.sh
[root@localhost data]#

```

### 40.7 ! -empty 非空文件 以及目录

```bash
[root@localhost day05]# find ./ ! -empty
./
./readme.md
./tmp
./tmp/detph-tmp
./tmp/detph-tmp/tmp001
[root@localhost day05]#

```

### 40.8 type -d -empty 空目录

```bash
[root@localhost data]# find ./ -type d -empty
./day05_1
```

### 40.9 -user  属主

```bash
[root@localhost day05]# ll
total 36
-rwxrwxrwx. 1 vagrant root 34209 Feb 23 04:50 readme.md
drwxr-xr-x. 3 root    root    23 Feb 23 03:54 tmp
[root@localhost day05]# find ./ -user vagrant
./readme.md
[root@localhost day05]#

```

### 40.10 -group  属组

```bash
[root@localhost day05]# ll
total 36
-rwxrwxrwx. 1 root vagrant 34209 Feb 23 04:50 readme.md
drwxr-xr-x. 3 root root       23 Feb 23 03:54 tmp
[root@localhost day05]# find ./ -group vagrant
./readme.md
[root@localhost day05]#

```

### 40.11 -atime atime 按照指定的访问时间来查找，单位是 天

### 40.12 -ctime ctime 按照指定的状态改变时间来查找，单位是 天

### 40.13 -mtime mtime按照指定的更改时间来查找，单位是 天

> 1. +n  表示文件更改时间距现在n天以前
> 2. n 表示文件更改时间距现在第n天
> 3. -n  表示文件更改时间距现在n天以内

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/c66b30a6ae2947d0aa4346c581e127fd.png)

## 41. scp 命令复制

服务器1：`192.168.56.12`

> 在指定目录下 存在 **111.tar.gz** 文件，我们的目的是将其复制到 13 服务器下同样的目录

```
[root@localhost opt]# ll
total 12
-rw-r--r--. 1 root root 10240 Oct 18 15:30 111.tar.gz
-rw-r--r--. 1 root root     0 Oct 18 15:29 11.txt
drwx--x--x. 4 root root    28 Sep  9 01:15 containerd
drwxr-xr-x. 4 root root    32 Sep 15 02:17 install
drwxr-xr-x. 4 root root    52 Oct 18 02:23 package
[root@localhost opt]# pwd
/opt
[root@localhost opt]# 
```

---

我们要执行的命令如下：`scp [要复制的文件] [目标用户]@[目标地址]:[路径]`

```
[root@localhost opt]# ll
total 12
-rw-r--r--. 1 root root 10240 Oct 18 15:30 111.tar.gz
-rw-r--r--. 1 root root     0 Oct 18 15:29 11.txt
drwx--x--x. 4 root root    28 Sep  9 01:15 containerd
drwxr-xr-x. 4 root root    32 Sep 15 02:17 install
drwxr-xr-x. 4 root root    52 Oct 18 02:23 package
[root@localhost opt]# scp ./111.tar.gz root@192.168.56.13:/opt
root@192.168.56.13's password: 
111.tar.gz                                                                                                                  100%   10KB   9.2MB/s   00:00  
[root@localhost opt]#
```

## 42. df 分析磁盘空间

> `df`（磁盘空间使用情况）命令是一个用于显示 Linux 系统上文件系统的磁盘空间使用情况的实用工具。该命令提供了一个简洁的方式来查看磁盘分区或文件系统的总容量、已使用空间、可用空间以及文件系统挂载点等信息
>
> ```
> df [选项] [文件|目录]
> ```

---

（查看整个空间的 `df`）

```
[root@localhost overlay2]# df
文件系统                        1K-块    已用      可用 已用% 挂载点
devtmpfs                      8203448       0   8203448    0% /dev
tmpfs                         8215420       0   8215420    0% /dev/shm
tmpfs                         8215420   66680   8148740    1% /run
tmpfs                         8215420       0   8215420    0% /sys/fs/cgroup
/dev/mapper/uino-root         8169472 4569896   3599576   56% /
/dev/sda1                      201380  116656     84724   58% /boot
/dev/mapper/uinnova-uinnova 209608708 6902836 202705872    4% /uinnova
tmpfs                         1643084       0   1643084    0% /run/user/0
overlay                     209608708 6902836 202705872    4% /uinnova/docker/overlay2/3bbdabdb0f4cdc1e85298e118abc674a1b6ea7623e83d6bb63d6558eb109344e/merged
[root@localhost overlay2]# 

```

---

（更加友好的方式显示 `df -h`）

```
[root@localhost overlay2]# df -h
文件系统                     容量  已用  可用 已用% 挂载点
devtmpfs                     7.9G     0  7.9G    0% /dev
tmpfs                        7.9G     0  7.9G    0% /dev/shm
tmpfs                        7.9G   66M  7.8G    1% /run
tmpfs                        7.9G     0  7.9G    0% /sys/fs/cgroup
/dev/mapper/uino-root        7.8G  4.4G  3.5G   56% /
/dev/sda1                    197M  114M   83M   58% /boot
/dev/mapper/uinnova-uinnova  200G  6.6G  194G    4% /uinnova
tmpfs                        1.6G     0  1.6G    0% /run/user/0
overlay                      200G  6.6G  194G    4% /uinnova/docker/overlay2/3bbdabdb0f4cdc1e85298e118abc674a1b6ea7623e83d6bb63d6558eb109344e/merged
[root@localhost overlay2]# 

```

---

（指定目录显示 `df -h /xxx`）

```
[root@localhost uinnova]# df -h /uinnova/
文件系统                     容量  已用  可用 已用% 挂载点
/dev/mapper/uinnova-uinnova  200G  6.6G  194G    4% /uinnova
[root@localhost uinnova]# 
```

## 43. du 磁盘使用量

> `du`（磁盘使用量）命令是一个用于计算指定文件或目录的磁盘使用量的工具。它可以递归地遍历指定目录下的所有文件和子目录，并计算它们的磁盘使用量。`du` 命令可以帮助我们快速了解文件和目录所占用的磁盘空间，方便进行磁盘清理或者查找磁盘空间占用较大的文件
>
> ```
> du [选项] [文件|目录]
> ```

---

（指定目录下 磁盘使用量 `du /xxx`）

```
[root@localhost uinnova]# du /uinnova/
```

---

（递归解析 一层目录 `du -h -d 1 /xxx`）

```
[root@localhost uinnova]# du -h -d 1 /uinnova/
1.3G	/uinnova/tools
1.5G	/uinnova/base
1.8G	/uinnova/deploy
543M	/uinnova/resource
389M	/uinnova/docker
81M	/uinnova/u-proxy
0	/uinnova/mydata
577M	/uinnova/thingjsBuild
43M	/uinnova/nginx
6.7G	/uinnova/
[root@localhost uinnova]# 
```

```
[root@localhost uinnova]# du -h --max-depth=1 /uinnova/
1.3G	/uinnova/tools
1.5G	/uinnova/base
1.8G	/uinnova/deploy
543M	/uinnova/resource
389M	/uinnova/docker
81M	/uinnova/u-proxy
0	/uinnova/mydata
577M	/uinnova/thingjsBuild
43M	/uinnova/nginx
6.7G	/uinnova/
[root@localhost uinnova]# 

```

## 44. firewall 防火墙

（查看防火墙服务情况）

```
systemctl status firewalld
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/30276/1684452727049/b8d7563581304e438767ee245169cfe3.png)

（查看防火墙的状态）

```
[root@localhost html]# firewall-cmd --state
running
[root@localhost html]# 
```

（启动防火墙）

```
[root@localhost html]# service firewalld start
Redirecting to /bin/systemctl start firewalld.service
[root@localhost html]# systemctl status firewalld
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)
   Active: active (running) since 一 2023-10-30 21:45:12 CST; 9s ago
     Docs: man:firewalld(1)
 Main PID: 6559 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─6559 /usr/bin/python2 -Es /usr/sbin/firewalld --nofork --nopid

10月 30 21:45:11 localhost.uino.local systemd[1]: Starting firewalld - dynamic firewall daemon...
10月 30 21:45:12 localhost.uino.local systemd[1]: Started firewalld - dynamic firewall daemon.
10月 30 21:45:12 localhost.uino.local firewalld[6559]: WARNING: AllowZoneDrifting is enabled. This is considered an insecure configuration option. It will be remove...ng it now.
Hint: Some lines were ellipsized, use -l to show in full.
[root@localhost html]# 
```

（关闭防火墙）

```
[root@localhost html]# firewall-cmd --state
running
[root@localhost html]# service firewalld stop
Redirecting to /bin/systemctl stop firewalld.service
[root@localhost html]# firewall-cmd --state
not running
[root@localhost html]# 
```

（重启防火墙服务）

```
[root@localhost html]# firewall-cmd --state
not running
[root@localhost html]# service firewalld restart
Redirecting to /bin/systemctl restart firewalld.service
[root@localhost html]# firewall-cmd --state
running
[root@localhost html]# 
```

（查看防火墙的规则）

```
[root@localhost html]# firewall-cmd --state
running
[root@localhost html]# firewall-cmd --list-all
public
  target: default
  icmp-block-inversion: no
  interfaces: 
  sources: 
  services: dhcpv6-client ssh
  ports: 
  protocols: 
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules: 

[root@localhost html]# 
```

（查询，开放 以及移除指定端口）

```
[root@localhost html]# firewall-cmd --query-port=8080/tcp
no
[root@localhost html]# firewall-cmd --permanent --add-port=8080/tcp
success
[root@localhost html]# firewall-cmd --query-port=8080/tcp
no
[root@localhost html]# firewall-cmd --permanent --remove-port=8080/tcp
success
[root@localhost html]# 
```

（重启防火墙）

```
[root@localhost html]# firewall-cmd --reload
success
[root@localhost html]# 
```

## 45. 密钥认证

> 服务器之间进行密钥认证后，避免了连接服务器，或是内容传输的时候需要不断的输入密码
>
> 互相认证的服务是：`192.168.56.12` 以及 `192.168.56.13`

登录服务【192.168.56.13】

（第一步）

```
[root@localhost ~]# ssh-keygen -t rsa
```

一直按 回车 命令，可以得到下面的内容：

```
[root@localhost ~]# ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): 
Created directory '/root/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:8HauLjPk6N2Io9hAerruCU4iPiwyToTm8byWj0UwGLU root@localhost.localdomain
The key's randomart image is:
+---[RSA 2048]----+
| ...             |
|  o .            |
| . E  .          |
|.   o  o         |
|.=   .  S .      |
|* + . .. o       |
|B+.o.=    .      |
|%O.o*o=o .       |
|XX==+oo=+        |
+----[SHA256]-----+
```

（查看生成的文件）

```
[root@localhost ~]# ls -a .ssh/
.  ..  id_rsa  id_rsa.pub
```

（将公钥赋值给12服务器）

```
[root@localhost /]# ssh-copy-id -i ~/.ssh/id_rsa.pub  root@192.168.56.12
```

```
[root@localhost /]# ssh-copy-id -i ~/.ssh/id_rsa.pub  root@192.168.56.12
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"
The authenticity of host '192.168.56.12 (192.168.56.12)' can't be established.
ECDSA key fingerprint is SHA256:mmZuCGkOy/k1MjlgQigAFOgR/P02U/DJOynxIiUdZ/g.
ECDSA key fingerprint is MD5:1a:a2:05:70:4c:d6:09:31:7c:4a:2d:03:37:ed:91:1f.
Are you sure you want to continue connecting (yes/no)? yes
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
root@192.168.56.12's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'root@192.168.56.12'"
and check to make sure that only the key(s) you wanted were added.
```

## 46 netstat 网络监控命令

### （核心参数）

```
-a (all)显示所有选项，
-t (tcp)仅显示tcp相关选项
-u (udp)仅显示udp相关选项
-n 拒绝显示别名，能显示数字的全部转化成数字。
-l 仅列出有在 Listen (监听) 的服務状态

-p 显示建立相关链接的程序名
-r 显示路由信息，路由表
-e 显示扩展信息，例如uid等
-s 按各个协议进行统计
-c 每隔一个固定时间，执行该netstat命令。

提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到
```

### （所有TCP 端口）

```
[root@localhost conf]# netstat -at
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
tcp        0      0 0.0.0.0:ddi-tcp-1       0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:cbt             0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:commplex-main   0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:distinct        0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:http            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:tproxy          0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:61810           0.0.0.0:*               LISTEN   
tcp        0      0 localhost:44819         0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN   
tcp        0      0 localhost:54376         localhost:wap-wsp       ESTABLISHED
tcp        0      0 localhost:40408         localhost:44819         ESTABLISHED
tcp        0      0 localhost:44819         localhost:40404         ESTABLISHED
```

### （所有udp 端口）

```
[root@localhost conf]# netstat -ua
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
udp        0      0 localhost:323           0.0.0.0:*          
udp6       0      0 localhost:323           [::]:*             
[root@localhost conf]# 
```

### （显示监听端口）

```
[root@localhost conf]# netstat -l
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
tcp        0      0 0.0.0.0:ddi-tcp-1       0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:cbt             0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:commplex-main   0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:distinct        0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:http            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:tproxy          0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:61810           0.0.0.0:*               LISTEN   
tcp        0      0 localhost:44819         0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN   
tcp6       0      0 [::]:cslistener         [::]:*                  LISTEN   
tcp6       0      0 localhost:wap-wsp       [::]:*                  LISTEN   
tcp6       0      0 [::]:webcache           [::]:*                  LISTEN   
tcp6       0      0 localhost:vrace         [::]:*                  LISTEN   
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN
```

### （显示监听TCP 端口）

```
[root@localhost conf]# netstat -lt
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
tcp        0      0 0.0.0.0:ddi-tcp-1       0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:cbt             0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:commplex-main   0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:distinct        0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:http            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:tproxy          0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:61810           0.0.0.0:*               LISTEN   
tcp        0      0 localhost:44819         0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN   
tcp6       0      0 [::]:cslistener         [::]:*                  LISTEN   
tcp6       0      0 localhost:wap-wsp       [::]:*                  LISTEN   
tcp6       0      0 [::]:webcache           [::]:*                  LISTEN   
tcp6       0      0 localhost:vrace         [::]:*                  LISTEN   
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN   
[root@localhost conf]# 
```

### （显示监听UDP 端口）

```
[root@localhost conf]# netstat -lu
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
udp        0      0 localhost:323           0.0.0.0:*          
udp6       0      0 localhost:323           [::]:*             
[root@localhost conf]# 
```

### （显示进程名称）

```
[root@localhost conf]# netstat -ltp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name  
tcp        0      0 0.0.0.0:ddi-tcp-1       0.0.0.0:*               LISTEN      1597/nginx: master  
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN      3875/java   
tcp        0      0 0.0.0.0:cbt             0.0.0.0:*               LISTEN      1597/nginx: master  
tcp        0      0 0.0.0.0:commplex-main   0.0.0.0:*               LISTEN      9305/node   
tcp        0      0 0.0.0.0:distinct        0.0.0.0:*               LISTEN      1597/nginx: master  
tcp        0      0 0.0.0.0:http            0.0.0.0:*               LISTEN      1597/nginx: master  
tcp        0      0 0.0.0.0:tproxy          0.0.0.0:*               LISTEN      3875/java   
tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN      11164/java  
tcp        0      0 0.0.0.0:61810           0.0.0.0:*               LISTEN      1597/nginx: master  
tcp        0      0 localhost:44819         0.0.0.0:*               LISTEN      9312/node   
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN      11796/sshd  
tcp6       0      0 [::]:cslistener         [::]:*                  LISTEN      31630/./minio   
tcp6       0      0 localhost:wap-wsp       [::]:*                  LISTEN      14862/java  
tcp6       0      0 [::]:webcache           [::]:*                  LISTEN      9599/java   
tcp6       0      0 localhost:vrace         [::]:*                  LISTEN      14862/java  
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN      11796/sshd  
[root@localhost conf]#
```

### （不显示用户/ 端口等）

```
[root@localhost conf]# netstat -ln
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State  
tcp        0      0 0.0.0.0:8888            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:7777            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:5000            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:9999            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:61810           0.0.0.0:*               LISTEN   
tcp        0      0 127.0.0.1:44819         0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN   
tcp6       0      0 :::9000                 :::*                    LISTEN   
tcp6       0      0 10.100.31.166:9200      :::*                    LISTEN   
tcp6       0      0 :::8080                 :::*                    LISTEN   
tcp6       0      0 10.100.31.166:9300      :::*                    LISTEN   
tcp6       0      0 :::22                   :::*                    LISTEN   
udp        0      0 127.0.0.1:323           0.0.0.0:*            
udp6       0      0 ::1:323                 :::*            
```

### （显示核心路由信息）

```
[root@localhost conf]# netstat -r
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         gateway         0.0.0.0         UG        0 0          0 ens192
10.100.31.0     0.0.0.0         255.255.255.0   U         0 0          0 ens192
link-local      0.0.0.0         255.255.0.0     U         0 0          0 ens192
[root@localhost conf]# 
```

### （寻找程序运行端口）

```
[root@localhost conf]# netstat -ln | grep "80"
tcp        0      0 0.0.0.0:8090            0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN   
tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN   
tcp6       0      0 :::8080                 :::*                    LISTEN   
[root@localhost conf]# 
```
